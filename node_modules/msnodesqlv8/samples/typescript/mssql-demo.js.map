{"version":3,"file":"mssql-demo.js","sourceRoot":"","sources":["mssql-demo.ts"],"names":[],"mappings":"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","sourcesContent":["import {Connection, Error, PreparedStatement, Query, SqlClient, QueryDescription, BulkTableMgr,} from 'msnodesqlv8';\n\n// require the module so it can be used in your node JS code.\nexport const sql: SqlClient = require('msnodesqlv8');\n\nlet supp = require('./demo-support');\n\n/*\n This demo assumes a SQL server database is available.  Modify the connection string below\n appropriately.  Note, for testing sqllocaldb can be very useful - here a sql server\n database can be run from the command line.\n for example :-\n sqllocaldb create node\n sqllocaldb start node\n sqllocaldb info node\n */\n\n// let test_conn_str = \"Driver={SQL Server Native Client 11.0};Server= np:\\\\\\\\.\\\\pipe\\\\LOCALDB#8765A478\\\\tsql\\\\query;Database={scratch};Trusted_Connection=Yes;\";\n\n// if you have a sqllocaldb running with instance called \"node\" and db \"scratch\" then\n// this will be used automatically.  To use another connection string for test\n// uncomment below.\n\nlet conn_str: string;\n\nlet demos = [\n    // open connection, simple query and close.\n    connection,\n    // prepared statements to repeat execute SQL with different params.\n    prepared,\n    // use the table manager to bind to a table and interact with it.\n    table,\n    // create and execute a stored procedure using pm.\n    procedure,\n    // query both ad hoc and via an open connection.\n    query,\n    // shows driver based events can be captured.\n    event,\n    // cancel a long running query\n    cancel\n];\n\ninterface Employee {\n    BusinessEntityID: number\n    NationalIDNumber: string\n    LoginID: string\n    OrganizationNode: any\n    OrganizationLevel: number,\n    JobTitle: string,\n    BirthDate: Date,\n    MaritalStatus: string,\n    Gender: string,\n    HireDate: string,\n    SalariedFlag: boolean,\n    VacationHours: number,\n    SickLeaveHours: number,\n    CurrentFlag: boolean,\n    rowguid: string,\n    ModifiedDate: Date\n}\n\nlet support: any = null;\nlet procedureHelper: any = null;\nlet helper: any = null;\nlet parsedJSON: Array<Employee> | null = null;\n\nsupp.GlobalConn.init(sql, (co: any) => {\n        conn_str = co.conn_str;\n        support = co.support;\n        procedureHelper = new support.ProcedureHelper(conn_str);\n        procedureHelper.setVerbose(false);\n        let async = co.async;\n        helper = co.helper;\n        parsedJSON = helper.getJSON('../../unit.tests/json');\n\n        console.log(conn_str);\n        async.series(demos, () => {\n            console.log(\"demo has finished.\");\n        });\n    }\n// to override an auto discovered sqllocaldb str assign above and uncomment below.\n// , test_conn_str\n);\n\nfunction event(done: Function): void {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n    let conn: Connection;\n\n    let fns: Array<Function> = [\n\n        function (async_done: Function) {\n            console.log(\"event begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err: Error, new_conn: Connection) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"listen to the events raised from the driver\");\n            let s = \"select top 1 id, name, type, crdate from sysobjects so where so.type='U'\";\n            console.log(s);\n            let q = conn.query(s, (err: Error, res: Array<any>) => {\n                Assert.ifError(err);\n                console.log(\"res.length = \" + res.length);\n                console.log(res);\n                async_done();\n            });\n\n            q.on('meta', (meta: any) => {\n                console.log('event: meta[0].name = ' + meta[0].name);\n            });\n\n            q.on('column', (col: any) => {\n                console.log('event: column = ' + col);\n            });\n\n            q.on('partial', (col: any) => {\n                console.log('event: partial column = ' + col);\n            });\n\n            q.on('submitted', (q: string) => {\n                console.log('event: submitted query = ' + JSON.stringify(q));\n            });\n\n            q.on('rowcount', (count: any) => {\n                console.log('event: rowcount = ' + count);\n            });\n\n            q.on('row', (row: any) => {\n                console.log('event: row = ' + row);\n            });\n\n            q.on('done', () => {\n                console.log('event: done');\n            });\n\n            q.on('open', () => {\n                console.log('event: open');\n            });\n\n            q.on('closed', () => {\n                console.log('event: open');\n            });\n\n            q.on('error', (err: any) => {\n                console.log(JSON.stringify(err));\n            });\n\n            q.on('warning', (err: any) => {\n                console.log(JSON.stringify(err));\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done()\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... event ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    })\n}\n\nfunction query(done: Function) {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n\n    let conn: Connection;\n\n    let fns = [\n\n        function (async_done: Function) {\n            console.log(\"query begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log('execute an ad hoc query with temporary connection.');\n            let q = \"declare @s NVARCHAR(MAX) = ?; select @s as s\";\n            sql.query(conn_str, q, ['node is great'], (err, res) => {\n                Assert.ifError(err);\n                console.log(res);\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err, new_conn) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"use an open connection to call query()\");\n            let s = \"select top 1 id, name, type, crdate from sysobjects so where so.type='U'\";\n            console.log(s);\n            conn.query(s, (err, res) => {\n                Assert.ifError(err);\n                if (res) {\n                    console.log(\"res.length = \" + res.length);\n                    console.log(res);    \n                }\n\n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            console.log(\"use an open connection to call queryRaw()\");\n            let s = \"select top 1 id, name, type, crdate from sysobjects so where so.type='U'\";\n            console.log(s);\n            conn.queryRaw(s, (err, res) => {\n                Assert.ifError(err);\n                if (res) {\n                    console.log(\"res.length = \" + res.rows.length);\n                    console.log(res);\n                }\n                \n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            console.log('use timeout to place limit on how long to wait for query.');\n            let queryObj: QueryDescription = {\n                query_str: \"waitfor delay \\'00:00:10\\';\",\n                query_timeout: 2\n            };\n\n            conn.query(queryObj, (err: any) => {\n                Assert.check(err != null);\n                Assert.check(err.message.indexOf('Query timeout expired') > 0);\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... query ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    })\n}\n\nfunction procedure(done: Function) {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n\n    let conn: Connection;\n\n    let sp_name = \"test_sp_get_int_int\";\n    let def = \"alter PROCEDURE <name>\" +\n        \"(\\n\" +\n        \"@num1 INT,\\n\" +\n        \"@num2 INT,\\n\" +\n        \"@num3 INT OUTPUT\\n\" +\n        \"\\n)\" +\n        \"AS\\n\" +\n        \"BEGIN\\n\" +\n        \"   SET @num3 = @num1 + @num2\\n\" +\n        \"   RETURN 99;\\n\" +\n        \"END\\n\";\n\n    let fns: ((async_done: Function) => any)[] = [\n\n        function (async_done: Function) {\n            console.log(\"procedure begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err, new_conn) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            def = def.replace(/<name>/g, sp_name);\n            console.log(\"create a procedure \" + sp_name);\n            console.log(def);\n            procedureHelper.createProcedure(sp_name, def, () => {\n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            let pm = conn.procedureMgr();\n            pm.callproc(sp_name, [10, 5], (err: Error, results: any, output: Array<any>) => {\n                Assert.ifError(err);\n                let expected = [99, 15];\n                console.log(output);\n                Assert.check(expected[0] == output[0], \"results didn't match\");\n                Assert.check(expected[1] == output[1], \"results didn't match\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            let pm = conn.procedureMgr();\n            console.log(\"describe procedure.\");\n            pm.describe(sp_name, summary => {\n                let s = JSON.stringify(summary, null, 2);\n                console.log(s);\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... procedure ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    })\n}\n\nfunction connection(done: Function) {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n\n    let conn: Connection;\n\n    let fns = [\n\n        function (async_done: Function) {\n            console.log(\"connection begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err, new_conn) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"fetch spid for the connection.\");\n            conn.query(\"select @@SPID as id, CURRENT_USER as name\", (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    Assert.check(res.length == 1, \"unexpected result length.\");\n                    let sp = res[0]['id'];\n                    Assert.check(sp != null, \"did not find expected id.\");  \n                }\n                \n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... connection ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    })\n}\n\nfunction empSelectSQL() {\n\n    return `SELECT [BusinessEntityID]\n     ,[NationalIDNumber]\n     ,[LoginID]\n     ,[OrganizationNode]\n     ,[OrganizationLevel]\n     ,[JobTitle]\n     ,[BirthDate]\n     ,[MaritalStatus]\n     ,[Gender]\n     ,[HireDate]\n     ,[SalariedFlag]\n     ,[VacationHours]\n     ,[SickLeaveHours]\n     ,[CurrentFlag]\n     ,[rowguid]\n     ,[ModifiedDate]\n     FROM [scratch].[dbo].[Employee]\n     WHERE BusinessEntityID = ?`;\n}\n\nfunction empDeleteSQL() {\n\n    return `DELETE FROM [scratch].[dbo].[Employee]\n        WHERE BusinessEntityID = ?`;\n}\n\ninterface Statements {\n    selectStatement?: PreparedStatement\n    deleteStatement?: PreparedStatement\n}\n\nfunction prepared(done: Function) {\n\n// create and populate table - fetch prepared statements to select and free records for employee table.\n// use the prepared statements to select and free rows.\n// free the statements and indicate this part of the demo has finished.\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n\n    function statementsFactory(): Statements {\n        return {\n        }\n    }\n\n    let statements:Statements = statementsFactory();\n\n    let table_name = \"Employee\";\n\n    let conn: Connection;\n\n    function employeePrepare(query: string, done: Function) {\n        conn.prepare(query, (err, ps) => {\n            Assert.ifError(err);\n            done(ps);\n        });\n    }\n\n    let fns = [\n\n        function (async_done: Function) {\n            console.log(\"prepared begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err, new_conn) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        // drop / create an Employee table.\n        function (async_done: Function) {\n            helper.dropCreateTable({\n                tableName: table_name\n            }, function () {\n                async_done();\n            });\n        },\n\n        // insert test set using bulk insert\n        function (async_done: Function) {\n            let tm = conn.tableMgr();\n            tm.bind(table_name, (bulkMgr: BulkTableMgr) => {\n                bulkMgr.insertRows(parsedJSON, () => {\n                    async_done();\n                });\n            });\n        },\n\n        // prepare a select statement.\n        function (async_done: Function) {\n            console.log(\"preparing a select statement.\");\n            employeePrepare(empSelectSQL(), (ps: PreparedStatement) => {\n                statements.selectStatement = ps;\n                async_done();\n            })\n        },\n\n        // prepare a free statement.\n        function (async_done: Function) {\n            console.log(\"preparing a free statement.\");\n            employeePrepare(empDeleteSQL(), (ps: PreparedStatement) => {\n                statements.deleteStatement = ps;\n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            console.log(\"check statements.\");\n            Assert.check(statements != null, \"prepared statement object is null.\");\n            Assert.check(statements.selectStatement != null, \"prepared select is null\");\n            Assert.check(statements.deleteStatement != null, \"prepared free is null\");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            let id = 1;\n            console.log(\"use prepared statement to fetch \" + id);\n            statements.selectStatement.preparedQuery([id], (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    Assert.check(res.length == 1);\n                    console.log(res[0]);\n                }\n               \n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            let id = 2;\n            console.log(\"use prepared statement to fetch \" + id);\n            statements.selectStatement.preparedQuery([id], (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    Assert.check(res.length == 1);\n                    console.log(res[0]);    \n                }\n                \n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            let id = 5;\n            console.log(\"use prepared statement to free \" + id);\n            statements.deleteStatement.preparedQuery([id], err => {\n                Assert.ifError(err);\n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            console.log(\"check how many rows are left.\");\n            conn.query(\"select * from Employee\", (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    console.log(\"returned rows \" + res.length);\n                    Assert.check(res.length == 9, \"one row should have been deleted.\");   \n                }\n               \n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"free statements\");\n            statements.selectStatement.free(() => {\n                statements.deleteStatement.free(() => {\n                    async_done();\n                })\n            })\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... prepared ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    });\n}\n\nfunction table(done: Function) {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n    let helper = new support.EmployeeHelper(sql, conn_str);\n    let conn: Connection;\n    let table_name = \"Employee\";\n    let bm: BulkTableMgr;\n    let records : Array<Employee>= helper.getJSON();\n\n\n    let fns = [\n\n        function (async_done: Function) {\n            console.log(\"table begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err, new_conn) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn != null, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"create an employee table.\");\n            helper.dropCreateTable({\n                tableName: table_name\n            }, function () {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            let tm = conn.tableMgr();\n            console.log(\"bind to table \" + table_name);\n            tm.bind(table_name, (bulk: BulkTableMgr) => {\n                bm = bulk;\n                Assert.check(bm, \"no bulk manager returned.\");\n                async_done();\n            })\n        },\n\n        function (async_done: Function) {\n            console.log(\"bulk insert records.\");\n            bm.insertRows(records, () => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"check rows have been inserted.\");\n            conn.query(\"select * from \" + table_name, (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    Assert.check(res.length == records.length);\n                }\n                \n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"update a column.\");\n            let newDate = new Date(\"2015-01-01T00:00:00.000Z\");\n            let modifications: Array<any> = [];\n            records.forEach((emp: Employee) => {\n                emp.ModifiedDate = newDate;\n                modifications.push({\n                    BusinessEntityID: emp.BusinessEntityID,\n                    ModifiedDate: newDate\n                });\n            });\n\n            let updateCols = [\n                {\n                    name: 'ModifiedDate'\n                }\n            ];\n\n            bm.setUpdateCols(updateCols);\n            bm.updateRows(modifications, () => {\n                async_done();\n            });\n        },\n\n        // use the select signature to construct a prepared query.\n\n        function (async_done: Function) {\n            let summary = bm.getSummary();\n            let s = JSON.stringify(summary, null, 2);\n            console.log(s);\n            console.log(summary.selectSignature);\n            console.log(\"prepare the above statement.\");\n            let select: string = summary.selectSignature;\n            conn.prepare(select, (err: Error, ps: PreparedStatement) => {\n                Assert.ifError(err);\n                ps.preparedQuery([1], (err, res) => {\n                    Assert.ifError(err);\n                    \n                    if (res) {\n                        Assert.check(res.length == 1);\n                    }\n                    \n                    async_done();\n                });\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"free the records using bulk operation.\");\n            let keys = helper.extractKey(records, 'BusinessEntityID');\n            bm.deleteRows(keys, () => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"check rows have been deleted.\");\n            conn.query(\"select * from \" + table_name, (err, res) => {\n                Assert.ifError(err);\n\n                if (res) {\n                    Assert.check(res.length == 0);\n                }\n                \n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... table ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    });\n}\n\nfunction cancel(done: Function): void {\n\n    let async = new support.Async();\n    let Assert = new support.Assert();\n    let conn: Connection;\n\n    let fns: Array<Function> = [\n\n        function (async_done: Function) {\n            console.log(\"cancel begins ...... \");\n            async_done();\n        },\n\n        function (async_done: Function) {\n            console.log(\"opening a connection ....\");\n            sql.open(conn_str, (err: Error, new_conn: Connection) => {\n                Assert.ifError(err);\n                conn = new_conn;\n                Assert.check(conn, \"connection from open is null.\");\n                console.log(\"... open\");\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"use an open connection to call query(), then cancel it\");\n            let q: Query = conn.query(sql.PollingQuery(\"waitfor delay \\'00:00:20\\';\"), err => {\n                if (err) {\n                    Assert.check(err.message.indexOf('Operation canceled') > 0);\n                }\n                \n                async_done();\n            });\n\n            conn.cancelQuery(q,  err => {\n                Assert.ifError(err);\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"cancel using query identifier.\");\n            let q: Query = conn.query(sql.PollingQuery(\"waitfor delay \\'00:00:20\\';\"), function (err) {\n                if (err) {\n                    Assert.check(err.message.indexOf('Operation canceled') > 0);\n                }\n                \n                async_done();\n            });\n\n            q.cancelQuery( err => {\n                Assert.ifError(err);\n            });\n        },\n\n        function (async_done:Function) {\n            console.log(\"cancel a prepared statement.\");\n            let s = \"waitfor delay ?;\";\n            let prepared: PreparedStatement;\n\n            let fns :Function[] = [\n                function (async_done:Function) {\n                    conn.prepare(sql.PollingQuery(s), (err: Error, pq: PreparedStatement) => {\n                        Assert.check(!err);\n                        prepared = pq;\n                        async_done();\n                    });\n                },\n\n                function (async_done:Function) {\n                    let q: Query = prepared.preparedQuery(['00:00:20'], (err: Error) => {\n                        Assert.check(err.message.indexOf('Operation canceled') > 0);\n                        async_done();\n                    });\n\n                    q.on('submitted', function () {\n                        q.cancelQuery((e: Error) => {\n                            Assert.ifError(e);\n                        });\n                    });\n                }\n            ];\n\n            async.series(fns, () => {\n                async_done();\n            })\n        },\n\n        function(async_done:Function) {\n            console.log(\"cancel a stored proc.\");\n\n            let sp_name = \"test_spwait_for\";\n\n            let def = \"alter PROCEDURE <name>\" +\n                \"(\\n\" +\n                \"@timeout datetime\" +\n                \"\\n)\" +\n                \"AS\\n\" +\n                \"BEGIN\\n\" +\n                \"waitfor delay @timeout;\" +\n                \"END\\n\";\n\n            let fns: Function[] = [\n                function (async_done: Function) {\n                    procedureHelper.createProcedure(sp_name, def, function () {\n                        async_done();\n                    });\n                },\n\n                function (async_done: Function) {\n                    let pm = conn.procedureMgr();\n                    pm.setPolling(true);\n                    let q: Query = pm.callproc(sp_name, ['0:0:20'], function (err) {\n                        Assert.check(err);\n                        \n                        if (err) {\n                            Assert.check(err.message.indexOf('Operation canceled') > 0);\n                        }\n                        \n                        async_done();\n                    });\n                    q.on('submitted', function () {\n                        q.cancelQuery(function (err) {\n                            Assert.check(!err);\n                        });\n                    });\n                }\n            ];\n\n            async.series(fns, function () {\n                async_done();\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"close connection.\");\n            conn.close(() => {\n                async_done()\n            });\n        },\n\n        function (async_done: Function) {\n            console.log(\"...... cancel ends.\");\n            async_done();\n        }\n    ];\n\n    console.log(\"executing async set of functions .....\");\n    async.series(fns, () => {\n        console.log(\"..... async completes. \\n\\n\\n\\n\\n\\n\");\n        done();\n    })\n}"]}